# ìŠµê´€ ìƒì„± AI Agent ê¸°ìˆ  ëª…ì„¸ì„œ

## ğŸ“‹ ë¬¸ì„œ ì •ë³´
- **í”„ë¡œì íŠ¸ëª…**: ìŠµê´€ ìƒì„± AI Agent
- **ë²„ì „**: 1.0
- **ì‘ì„±ì¼**: 2026-01-XX

---

## 1. ê¸°ìˆ  ìŠ¤íƒ ê°œìš”

### 1.1 í”„ë¡ íŠ¸ì—”ë“œ
- **í”„ë ˆì„ì›Œí¬**: React 18+
- **ì–¸ì–´**: JavaScript
- **ìŠ¤íƒ€ì¼ë§**: CSS Modules ë˜ëŠ” Styled Components
- **ìƒíƒœ ê´€ë¦¬**: React Query
- **ë¼ìš°íŒ…**: React Router
- **ë¹Œë“œ ë„êµ¬**: Vite
- **ë°°í¬**: Vercel

### 1.2 ë°±ì—”ë“œ
- **BaaS**: Supabase
  - PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
  - ì¸ì¦ (Auth)
  - ì‹¤ì‹œê°„ êµ¬ë… (Realtime)
  - ìŠ¤í† ë¦¬ì§€ (Storage)
  - Edge Functions (ì„œë²„ë¦¬ìŠ¤ í•¨ìˆ˜)

### 1.3 AI/ML
- **LLM API**: OpenAI GPT API
  - ëª¨ë¸: gpt-4o-mini (ê¸°ë³¸), gpt-4o (ê³ ê¸‰ ê¸°ëŠ¥)
  - í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
  - RAG (Retrieval-Augmented Generation) íŒ¨í„´

### 1.4 ë°ì´í„° ì €ì¥
- **í´ë¼ìš°ë“œ**: Supabase PostgreSQL
- **ë¡œì»¬**: IndexedDB (ì˜¤í”„ë¼ì¸ ì§€ì›)

### 1.5 ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„
- **ì—ëŸ¬ ì¶”ì **: Sentry
- **ì‚¬ìš©ëŸ‰ ë¶„ì„**: Supabase Analytics
- **ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§**: Vercel Analytics
- **ì‚¬ìš©ì í–‰ë™ ë¶„ì„**: Google Analytics ë˜ëŠ” Mixpanel

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ì „ì²´ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Client (React App)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   UI     â”‚  â”‚  State   â”‚           â”‚
â”‚  â”‚ Componentsâ”‚  â”‚ Managementâ”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚         â”‚              â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Supabaseâ”‚    â”‚ OpenAI  â”‚
    â”‚  (BaaS) â”‚    â”‚   API   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë°ì´í„° íë¦„

1. **ì‚¬ìš©ì ì•¡ì…˜** â†’ React ì»´í¬ë„ŒíŠ¸
2. **ìƒíƒœ ì—…ë°ì´íŠ¸** â†’ React Query
3. **API í˜¸ì¶œ** â†’ Supabase Client ë˜ëŠ” OpenAI API
4. **ë°ì´í„° ì €ì¥** â†’ Supabase PostgreSQL ë˜ëŠ” IndexedDB
5. **UI ì—…ë°ì´íŠ¸** â†’ React ë¦¬ë Œë”ë§

---

## 3. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

### 3.1 í…Œì´ë¸” êµ¬ì¡°

#### users (Supabase Auth í™•ì¥)
```sql
-- Supabase Authì—ì„œ ìë™ ìƒì„±
-- ì¶”ê°€ í”„ë¡œí•„ ì •ë³´ëŠ” profiles í…Œì´ë¸”ì— ì €ì¥
```

#### profiles
```sql
CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  nickname TEXT,
  avatar_url TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### habits
```sql
CREATE TABLE habits (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  name TEXT NOT NULL,
  description TEXT,
  target_value NUMERIC,
  target_unit TEXT, -- 'ë¶„', 'km', 'í˜ì´ì§€' ë“±
  frequency_type TEXT NOT NULL, -- 'daily', 'weekly', 'monthly'
  frequency_value INTEGER NOT NULL, -- ì£¼ NíšŒ, ì›” NíšŒ ë“±
  category TEXT, -- 'exercise', 'reading', 'health', 'learning', 'work', 'other'
  reminder_time TIME,
  start_date DATE NOT NULL DEFAULT CURRENT_DATE,
  end_date DATE,
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_habits_user_id ON habits(user_id);
CREATE INDEX idx_habits_user_active ON habits(user_id, is_active);
```

#### habit_checkins
```sql
CREATE TABLE habit_checkins (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  habit_id UUID REFERENCES habits(id) ON DELETE CASCADE,
  checkin_date DATE NOT NULL,
  is_completed BOOLEAN NOT NULL DEFAULT FALSE,
  value NUMERIC, -- ìˆ˜ì¹˜ ì…ë ¥ ì‹œ ê°’
  notes TEXT, -- Phase 2: ì¼ê¸°
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  UNIQUE(habit_id, checkin_date)
);

CREATE INDEX idx_checkins_habit_date ON habit_checkins(habit_id, checkin_date);
CREATE INDEX idx_checkins_date ON habit_checkins(checkin_date);
```

#### habit_images (Phase 2)
```sql
CREATE TABLE habit_images (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  checkin_id UUID REFERENCES habit_checkins(id) ON DELETE CASCADE,
  image_url TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);
```

#### ai_conversations
```sql
CREATE TABLE ai_conversations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,
  message_type TEXT NOT NULL, -- 'user', 'assistant'
  content TEXT NOT NULL,
  metadata JSONB, -- ì¶”ê°€ ì»¨í…ìŠ¤íŠ¸ ì •ë³´
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_conversations_user ON ai_conversations(user_id, created_at);
```

### 3.2 Row Level Security (RLS) ì •ì±…

```sql
-- profiles: ì‚¬ìš©ìëŠ” ìì‹ ì˜ í”„ë¡œí•„ë§Œ ì¡°íšŒ/ìˆ˜ì • ê°€ëŠ¥
ALTER TABLE profiles ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own profile"
  ON profiles FOR SELECT
  USING (auth.uid() = id);

CREATE POLICY "Users can update own profile"
  ON profiles FOR UPDATE
  USING (auth.uid() = id);

-- habits: ì‚¬ìš©ìëŠ” ìì‹ ì˜ ìŠµê´€ë§Œ ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
ALTER TABLE habits ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage own habits"
  ON habits FOR ALL
  USING (auth.uid() = user_id);

-- habit_checkins: ì‚¬ìš©ìëŠ” ìì‹ ì˜ ìŠµê´€ ì²´í¬ì¸ë§Œ ì¡°íšŒ/ìˆ˜ì • ê°€ëŠ¥
ALTER TABLE habit_checkins ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can manage own checkins"
  ON habit_checkins FOR ALL
  USING (
    EXISTS (
      SELECT 1 FROM habits
      WHERE habits.id = habit_checkins.habit_id
      AND habits.user_id = auth.uid()
    )
  );
```

---

## 4. API ì„¤ê³„

### 4.1 Supabase Client API

#### ìŠµê´€ ê´€ë¦¬
```javascript
// ìŠµê´€ ìƒì„±
const { data, error } = await supabase
  .from('habits')
  .insert({
    name: 'ìš´ë™í•˜ê¸°',
    frequency_type: 'daily',
    frequency_value: 1,
    category: 'exercise'
  })
  .select()
  .single();

// ìŠµê´€ ëª©ë¡ ì¡°íšŒ
const { data, error } = await supabase
  .from('habits')
  .select('*')
  .eq('is_active', true)
  .order('created_at', { ascending: false });

// ìŠµê´€ ìˆ˜ì •
const { data, error } = await supabase
  .from('habits')
  .update({ name: 'ìƒˆë¡œìš´ ì´ë¦„' })
  .eq('id', habitId)
  .select()
  .single();

// ìŠµê´€ ì‚­ì œ
const { error } = await supabase
  .from('habits')
  .delete()
  .eq('id', habitId);
```

#### ì²´í¬ì¸ ê´€ë¦¬
```javascript
// ì²´í¬ì¸ ê¸°ë¡
const { data, error } = await supabase
  .from('habit_checkins')
  .upsert({
    habit_id: habitId,
    checkin_date: '2026-01-15',
    is_completed: true,
    value: 30
  })
  .select()
  .single();

// ê¸°ê°„ë³„ ì²´í¬ì¸ ì¡°íšŒ
const { data, error } = await supabase
  .from('habit_checkins')
  .select('*')
  .eq('habit_id', habitId)
  .gte('checkin_date', startDate)
  .lte('checkin_date', endDate)
  .order('checkin_date', { ascending: true });
```

### 4.2 OpenAI API í†µí•©

#### AI ì±„íŒ… í•¨ìˆ˜
```javascript
/**
 * AIì™€ ì±„íŒ…í•˜ëŠ” í•¨ìˆ˜
 * @param {string} userMessage - ì‚¬ìš©ì ë©”ì‹œì§€
 * @param {Object} context - ì»¨í…ìŠ¤íŠ¸ ì •ë³´
 * @param {Array} context.habits - ì‚¬ìš©ì ìŠµê´€ ë°°ì—´
 * @param {Array} context.recentCheckins - ìµœê·¼ ì²´í¬ì¸ ê¸°ë¡ ë°°ì—´
 * @param {Array} context.conversationHistory - ëŒ€í™” ê¸°ë¡ ë°°ì—´
 * @returns {Promise<string>} AI ì‘ë‹µ
 */
async function chatWithAI(userMessage, context) {
  const systemPrompt = `
    ë‹¹ì‹ ì€ ìŠµê´€ í˜•ì„±ì„ ë„ì™€ì£¼ëŠ” ì¹œê·¼í•œ AI ì½”ì¹˜ì…ë‹ˆë‹¤.
    ì‚¬ìš©ìì˜ ìŠµê´€ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë§ì¶¤í˜• ì¡°ì–¸ì„ ì œê³µí•˜ì„¸ìš”.
    
    ì‚¬ìš©ì ìŠµê´€:
    ${JSON.stringify(context.habits, null, 2)}
    
    ìµœê·¼ ì²´í¬ì¸ ê¸°ë¡:
    ${JSON.stringify(context.recentCheckins, null, 2)}
  `;

  const response = await fetch('https://api.openai.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${process.env.OPENAI_API_KEY}`
    },
    body: JSON.stringify({
      model: 'gpt-4o-mini',
      messages: [
        { role: 'system', content: systemPrompt },
        ...context.conversationHistory.map(c => ({
          role: c.message_type,
          content: c.content
        })),
        { role: 'user', content: userMessage }
      ],
      temperature: 0.7,
      max_tokens: 500
    })
  });

  const data = await response.json();
  return data.choices[0].message.content;
}
```

#### Supabase Edge Functionë¡œ ë˜í•‘
```typescript
// supabase/functions/ai-chat/index.ts
// ì°¸ê³ : Deno Edge FunctionsëŠ” TypeScriptë¥¼ ê¸°ë³¸ ì§€ì›í•©ë‹ˆë‹¤.

import { serve } from 'https://deno.land/std@0.168.0/http/server.ts';
import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';

const systemPrompt = `
  ë‹¹ì‹ ì€ ìŠµê´€ í˜•ì„±ì„ ë„ì™€ì£¼ëŠ” ì¹œê·¼í•œ AI ì½”ì¹˜ì…ë‹ˆë‹¤.
  ì‚¬ìš©ìì˜ ìŠµê´€ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ë§ì¶¤í˜• ì¡°ì–¸ì„ ì œê³µí•˜ì„¸ìš”.
`;

serve(async (req) => {
  const { message, userId } = await req.json();
  
  // ì‚¬ìš©ì ì»¨í…ìŠ¤íŠ¸ ì¡°íšŒ
  const supabase = createClient(
    Deno.env.get('SUPABASE_URL') ?? '',
    Deno.env.get('SUPABASE_ANON_KEY') ?? ''
  );
  
  const { data: habits } = await supabase
    .from('habits')
    .select('*')
    .eq('user_id', userId)
    .eq('is_active', true);
  
  // OpenAI API í˜¸ì¶œ
  const openaiResponse = await fetch('https://api.openai.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'Authorization': `Bearer ${Deno.env.get('OPENAI_API_KEY')}`
    },
    body: JSON.stringify({
      model: 'gpt-4o-mini',
      messages: [
        { role: 'system', content: systemPrompt },
        { role: 'user', content: message }
      ]
    })
  });
  
  const aiData = await openaiResponse.json();
  
  // ëŒ€í™” ê¸°ë¡ ì €ì¥
  await supabase.from('ai_conversations').insert([
    { user_id: userId, message_type: 'user', content: message },
    { user_id: userId, message_type: 'assistant', content: aiData.choices[0].message.content }
  ]);
  
  return new Response(JSON.stringify({ response: aiData.choices[0].message.content }), {
    headers: { 'Content-Type': 'application/json' }
  });
});
```

---

## 5. í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

### 5.1 í´ë” êµ¬ì¡°
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ common/          # ê³µí†µ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ habits/           # ìŠµê´€ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ chat/             # AI ì±„íŒ… ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ stats/            # í†µê³„ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ layout/           # ë ˆì´ì•„ì›ƒ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Dashboard.jsx
â”‚   â”œâ”€â”€ Habits.jsx
â”‚   â”œâ”€â”€ Chat.jsx
â”‚   â”œâ”€â”€ Stats.jsx
â”‚   â””â”€â”€ Settings.jsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useHabits.js      # React Query hooks
â”‚   â”œâ”€â”€ useCheckins.js
â”‚   â”œâ”€â”€ useAIChat.js
â”‚   â””â”€â”€ useAuth.js
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ supabase.js
â”‚   â”œâ”€â”€ openai.js
â”‚   â””â”€â”€ storage.js        # IndexedDB ê´€ë¦¬
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ date.js
â”‚   â”œâ”€â”€ stats.js
â”‚   â””â”€â”€ validation.js
â””â”€â”€ constants/
    â””â”€â”€ index.js          # ìƒìˆ˜ ì •ì˜
```

### 5.2 ì£¼ìš” ì»´í¬ë„ŒíŠ¸

#### HabitList ì»´í¬ë„ŒíŠ¸
```javascript
// components/habits/HabitList.jsx
import { useHabits } from '@/hooks/useHabits';

export function HabitList() {
  const { habits, isLoading } = useHabits();
  
  if (isLoading) return <Loading />;
  
  return (
    <div className="habit-list">
      {habits.map(habit => (
        <HabitCard key={habit.id} habit={habit} />
      ))}
    </div>
  );
}
```

#### AIChat ì»´í¬ë„ŒíŠ¸
```javascript
// components/chat/AIChat.jsx
import { useState } from 'react';
import { useAIChat } from '@/hooks/useAIChat';

export function AIChat() {
  const [message, setMessage] = useState('');
  const { messages, sendMessage, isLoading } = useAIChat();
  
  const handleSubmit = async (e) => {
    e.preventDefault();
    await sendMessage(message);
    setMessage('');
  };
  
  return (
    <div className="chat-container">
      <div className="messages">
        {messages.map(msg => (
          <MessageBubble key={msg.id} message={msg} />
        ))}
      </div>
      <form onSubmit={handleSubmit}>
        <input
          value={message}
          onChange={(e) => setMessage(e.target.value)}
          placeholder="AIì—ê²Œ ì§ˆë¬¸í•˜ì„¸ìš”..."
        />
        <button type="submit" disabled={isLoading}>
          ì „ì†¡
        </button>
      </form>
    </div>
  );
}
```

---

## 6. ìƒíƒœ ê´€ë¦¬

### 6.1 React Query ì‚¬ìš© ì˜ˆì‹œ
```javascript
// hooks/useHabits.js
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import { getHabits, createHabit, updateHabit, deleteHabit } from '@/services/supabase/habits';

/**
 * ìŠµê´€ ëª©ë¡ ì¡°íšŒ Hook
 */
export function useHabits() {
  return useQuery({
    queryKey: ['habits'],
    queryFn: getHabits,
    staleTime: 1000 * 60 * 5, // 5ë¶„
  });
}

/**
 * ìŠµê´€ ìƒì„± Mutation Hook
 */
export function useCreateHabit() {
  const queryClient = useQueryClient();
  
  return useMutation({
    mutationFn: createHabit,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['habits'] });
    },
  });
}

/**
 * ìŠµê´€ ìˆ˜ì • Mutation Hook
 */
export function useUpdateHabit() {
  const queryClient = useQueryClient();
  
  return useMutation({
    mutationFn: ({ id, updates }) => updateHabit(id, updates),
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['habits'] });
    },
  });
}

/**
 * ìŠµê´€ ì‚­ì œ Mutation Hook
 */
export function useDeleteHabit() {
  const queryClient = useQueryClient();
  
  return useMutation({
    mutationFn: deleteHabit,
    onSuccess: () => {
      queryClient.invalidateQueries({ queryKey: ['habits'] });
    },
  });
}
```

---

## 7. ì˜¤í”„ë¼ì¸ ì§€ì›

### 7.1 IndexedDB êµ¬ì¡°
```javascript
// services/storage.js
import { openDB } from 'idb';

const dbName = 'habit-tracker';
const dbVersion = 1;

/**
 * IndexedDB ì´ˆê¸°í™”
 */
export async function initDB() {
  return openDB(dbName, dbVersion, {
    upgrade(db) {
      // habits ì €ì¥ì†Œ
      if (!db.objectStoreNames.contains('habits')) {
        db.createObjectStore('habits', { keyPath: 'id' });
      }
      // checkins ì €ì¥ì†Œ
      if (!db.objectStoreNames.contains('checkins')) {
        const checkinStore = db.createObjectStore('checkins', { keyPath: 'id' });
        checkinStore.createIndex('habit_id', 'habit_id');
        checkinStore.createIndex('date', 'checkin_date');
      }
      // sync queue ì €ì¥ì†Œ
      if (!db.objectStoreNames.contains('sync_queue')) {
        db.createObjectStore('sync_queue', { keyPath: 'id', autoIncrement: true });
      }
    }
  });
}

/**
 * ì˜¤í”„ë¼ì¸ ì‹œ ë¡œì»¬ ì €ì¥
 * @param {Object} checkin - ì²´í¬ì¸ ë°ì´í„°
 */
export async function saveCheckinOffline(checkin) {
  const db = await initDB();
  await db.add('checkins', checkin);
  await db.add('sync_queue', { type: 'checkin', data: checkin });
}

/**
 * ì˜¨ë¼ì¸ ì‹œ ë™ê¸°í™”
 */
export async function syncOfflineData() {
  const db = await initDB();
  const queue = await db.getAll('sync_queue');
  
  for (const item of queue) {
    try {
      // Supabaseì— ë™ê¸°í™”
      await syncToSupabase(item);
      // íì—ì„œ ì œê±°
      await db.delete('sync_queue', item.id);
    } catch (error) {
      console.error('Sync failed:', error);
    }
  }
}
```

---

## 8. ë³´ì•ˆ

### 8.1 API í‚¤ ê´€ë¦¬
- í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© (`.env.local`)
- Supabase Edge Functionsì—ì„œë§Œ OpenAI API í‚¤ ì‚¬ìš©
- í´ë¼ì´ì–¸íŠ¸ì—ì„œëŠ” ì§ì ‘ OpenAI API í˜¸ì¶œí•˜ì§€ ì•ŠìŒ

### 8.2 ì¸ì¦
- Supabase Auth ì‚¬ìš©
- JWT í† í° ê¸°ë°˜ ì¸ì¦
- RLS ì •ì±…ìœ¼ë¡œ ë°ì´í„° ì ‘ê·¼ ì œì–´

### 8.3 ë°ì´í„° ê²€ì¦
```javascript
// utils/validation.js

/**
 * ìŠµê´€ ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
 * @param {Object} habit - ìŠµê´€ ë°ì´í„°
 * @returns {Object} { isValid: boolean, errors: Array }
 */
export function validateHabit(habit) {
  const errors = [];
  
  if (!habit.name || habit.name.trim().length === 0) {
    errors.push('ìŠµê´€ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.');
  } else if (habit.name.length > 50) {
    errors.push('ìŠµê´€ ì´ë¦„ì€ 50ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
  }
  
  if (habit.description && habit.description.length > 200) {
    errors.push('ì„¤ëª…ì€ 200ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.');
  }
  
  const validFrequencyTypes = ['daily', 'weekly', 'monthly'];
  if (!validFrequencyTypes.includes(habit.frequency_type)) {
    errors.push('ìœ íš¨í•˜ì§€ ì•Šì€ ë¹ˆë„ íƒ€ì…ì…ë‹ˆë‹¤.');
  }
  
  if (!habit.frequency_value || habit.frequency_value < 1) {
    errors.push('ë¹ˆë„ ê°’ì€ 1 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
  }
  
  const validCategories = ['exercise', 'reading', 'health', 'learning', 'work', 'other'];
  if (habit.category && !validCategories.includes(habit.category)) {
    errors.push('ìœ íš¨í•˜ì§€ ì•Šì€ ì¹´í…Œê³ ë¦¬ì…ë‹ˆë‹¤.');
  }
  
  return {
    isValid: errors.length === 0,
    errors
  };
}
```

---

## 9. ì„±ëŠ¥ ìµœì í™”

### 9.1 ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…
```javascript
// pages/Dashboard.jsx
import { lazy, Suspense } from 'react';

const StatsChart = lazy(() => import('@/components/stats/StatsChart'));

export function Dashboard() {
  return (
    <Suspense fallback={<Loading />}>
      <StatsChart />
    </Suspense>
  );
}
```

### 9.2 ë°ì´í„° ìºì‹±
- React Query ì‚¬ìš©í•˜ì—¬ ìë™ ìºì‹±
- staleTime ì„¤ì •ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ì¬ìš”ì²­ ë°©ì§€

### 9.3 ì´ë¯¸ì§€ ìµœì í™”
- Phase 2ì—ì„œ ì´ë¯¸ì§€ ì—…ë¡œë“œ ì‹œ Supabase Storage ì‚¬ìš©
- ì´ë¯¸ì§€ ë¦¬ì‚¬ì´ì§• ë° ìµœì í™”

---

## 10. ë°°í¬

### 10.1 ë¹Œë“œ ì„¤ì •
```javascript
// vite.config.js
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';

export default defineConfig({
  plugins: [react()],
  build: {
    outDir: 'dist',
    sourcemap: true
  }
});
```

### 10.2 í™˜ê²½ ë³€ìˆ˜
```bash
# .env.local
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

### 10.3 CI/CD
- GitHub Actions ì‚¬ìš©
- ìë™ ë¹Œë“œ ë° ë°°í¬ (Vercel)

---

## ë¶€ë¡

### A. ì˜ì¡´ì„± íŒ¨í‚¤ì§€
```json
{
  "name": "uHavit",
  "version": "1.0.0",
  "type": "module",
  "engines": {
    "node": ">=18.0.0",
    "pnpm": ">=8.0.0"
  },
  "packageManager": "pnpm@8.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "preview": "vite preview",
    "lint": "eslint . --ext js,jsx"
  },
  "dependencies": {
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "react-router-dom": "^6.20.0",
    "@supabase/supabase-js": "^2.38.0",
    "@tanstack/react-query": "^5.12.0",
    "idb": "^8.0.0"
  },
  "devDependencies": {
    "vite": "^5.0.0",
    "@vitejs/plugin-react": "^4.2.0",
    "eslint": "^8.0.0",
    "prettier": "^3.0.0"
  }
}
```

**ì°¸ê³ **: ì´ í”„ë¡œì íŠ¸ëŠ” **pnpm**ì„ íŒ¨í‚¤ì§€ ê´€ë¦¬ìë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.

### B. ì°¸ê³  ìë£Œ
- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [OpenAI API ë¬¸ì„œ](https://platform.openai.com/docs)
- [React ë¬¸ì„œ](https://react.dev)
- [Vite ë¬¸ì„œ](https://vitejs.dev)
